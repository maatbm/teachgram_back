CREATE TABLE IF NOT EXISTS users (

    -- PRIMARY FIELDS
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR NOT NULL,
    mail VARCHAR NOT NULL UNIQUE,
    username VARCHAR NOT NULL UNIQUE,
    description TEXT NOT NULL,
    phone VARCHAR NOT NULL UNIQUE,
    password VARCHAR NOT NULL,
    profile_link VARCHAR NOT NULL,

    -- AUDIT FIELDS
    deleted BOOLEAN NOT NULL DEFAULT FALSE,
    created_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP

);

-- INDEXES
CREATE INDEX idx_users_active ON users(deleted) WHERE deleted = false;
CREATE INDEX idx_users_deleted ON users(deleted) WHERE deleted = true;
